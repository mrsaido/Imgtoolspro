<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Img Tools Pro - Redimensionner, compresser et supprimer l'arrière-plan</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"></script>
    <style>
        .dropzone {
            border: 2px dashed #ccc;
            transition: all 0.3s ease;
        }
        .dropzone.active {
            border-color: #4f46e5;
            background-color: #f0f7ff;
        }
        .image-preview {
            max-height: 400px;
            object-fit: contain;
        }
        .progress-bar {
            transition: width 0.3s ease;
        }
        .bg-custom {
            background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 50%, #d946ef 100%);
        }
        input[type="number"]::-webkit-inner-spin-button,
        input[type="number"]::-webkit-outer-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }
        .tab-button {
            transition: all 0.3s ease;
        }
        .tab-button.active {
            background-color: #4f46e5;
            color: white;
        }
        .transparent-bg {
            background-image: linear-gradient(45deg, #e5e7eb 25%, transparent 25%, transparent 75%, #e5e7eb 75%, #e5e7eb),
                              linear-gradient(45deg, #e5e7eb 25%, transparent 25%, transparent 75%, #e5e7eb 75%, #e5e7eb);
            background-size: 20px 20px;
            background-position: 0 0, 10px 10px;
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <div class="container mx-auto px-4 py-12">
        <div class="max-w-4xl mx-auto bg-white rounded-xl shadow-lg overflow-hidden">
            <!-- Header -->
            <div class="bg-custom text-white py-6 px-8">
                <div class="flex items-center justify-center text-center w-full">
                    <div>
                        <h1 class="text-3xl font-bold">Img Tools Pro</h1>
                        <p class="opacity-90">Redimensionner, compresser et supprimer les arrière-plans des images</p>
                    </div>
                    <div class="bg-white bg-opacity-0 p-3 rounded-full">
                       
                    </div>
                </div>
            </div>

            <!-- Tabs -->
            <div class="flex border-b border-gray-200">
				 <button id="bgRemoveTab" class="tab-button flex-1 py-3 px-4 text-center font-medium">
                    <i class="fas fa-cut mr-2"></i> Supprimer l'arrière-plan
                </button>
                <button id="resizeTab" class="tab-button active flex-1 py-3 px-4 text-center font-medium">
                    <i class="fas fa-expand mr-2"></i> Redimensionner
                </button>
                <button id="compressTab" class="tab-button flex-1 py-3 px-4 text-center font-medium">
                    <i class="fas fa-compress-alt mr-2"></i> Compresse
                </button>
               
            </div>

            <!-- Main Content -->
            <div class="p-8">
                <!-- Resize Panel -->
                <div id="resizePanel" class="grid md:grid-cols-2 gap-8">
                    <!-- Upload Section -->
                    <div>
                        <div id="dropzone" class="dropzone rounded-lg p-8 text-center cursor-pointer mb-6">
                            <div class="flex flex-col items-center justify-center space-y-4">
                                <i class="fas fa-cloud-upload-alt text-5xl text-indigo-500"></i>
                                <h3 class="text-xl font-semibold">Faites glisser et déposez votre image ici</h3>
                                <p class="text-gray-500">ou cliquez pour sélectionner</p>
                                <input type="file" id="fileInput" class="hidden" accept="image/*">
                                <button id="selectFileBtn" class="bg-indigo-600 text-white px-6 py-2 rounded-lg hover:bg-indigo-700 transition">
                                    Sélectionner un fichier
                                </button>
                            </div>
                        </div>

                        <!-- Settings -->
                        <div class="bg-gray-50 p-6 rounded-lg">
                            <h3 class="font-semibold text-lg mb-4">Paramètres de redimensionnement</h3>
                            
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Taille de sortie</label>
                                    <div class="flex items-center space-x-2">
                                        <input type="number" id="outputWidth" value="1000" min="1" class="border border-gray-300 text-gray-900 text-sm rounded-lg block w-full p-2.5">
                                        <span class="text-gray-500">x</span>
                                        <input type="number" id="outputHeight" value="1000" min="1" class="border border-gray-300 text-gray-900 text-sm rounded-lg block w-full p-2.5">
                                        <span class="text-gray-500">px</span>
                                    </div>
                                </div>

                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Mode de redimensionnement</label>
                                    <select id="resizeMode" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-indigo-500 focus:border-indigo-500 block w-full p-2.5">
                                        <option value="fit">Ajustement (hauteur/largeur)</option>
                                        <option value="fill">Remplir (couper si nécessaire)</option>
                                        <option value="stretch">Étirer (déformer pour s'adapter)</option>
                                    </select>
                                </div>

                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Remplissage</label>
                                    <select id="paddingColor" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-indigo-500 focus:border-indigo-500 block w-full p-2.5">
                                        <option value="transparent">Transparente</option>
                                        <option value="white">Blanc</option>
                                        <option value="black">Noir</option>
                                        <option value="custom">Personnalisé</option>
                                    </select>
                                </div>

                                <div id="customColorContainer" class="hidden">
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Couleur personnalisée</label>
                                    <input type="color" id="customColor" value="#ffffff" class="w-full h-10">
                                </div>

                                <div>
                                    <label class="flex items-center space-x-2">
                                        <input type="checkbox" id="upscaleCheckbox" checked class="w-4 h-4 text-indigo-600 bg-gray-100 border-gray-300 rounded focus:ring-indigo-500">
                                        <span class="text-sm font-medium text-gray-700">Améliorer la qualité (haut de gamme)</span>
                                    </label>
                                </div>

                                <button id="applyBtn" class="w-full bg-indigo-600 text-white py-2 px-4 rounded-lg hover:bg-indigo-700 transition">
                                   Appliquer les paramètres
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Preview Section -->
                    <div>
                        <div class="border border-gray-200 rounded-lg p-4 mb-6">
                            <h3 class="font-semibold text-lg mb-4">Aperçu</h3>
                            <div id="previewContainer" class="flex items-center justify-center bg-gray-100 rounded-lg min-h-64">
                                <p class="text-gray-500 text-center p-8">Votre image apparaîtra ici</p>
                            </div>
                        </div>

                        <!-- Progress Bar -->
                        <div id="progressContainer" class="hidden mb-6">
                            <div class="flex justify-between mb-1">
                                <span class="text-sm font-medium text-gray-700">Traitement...</span>
                                <span id="progressPercent" class="text-sm font-medium text-gray-700">0%</span>
                            </div>
                            <div class="w-full bg-gray-200 rounded-full h-2.5">
                                <div id="progressBar" class="progress-bar bg-indigo-600 h-2.5 rounded-full" style="width: 0%"></div>
                            </div>
                        </div>

                        <!-- Download Button -->
                        <button id="downloadBtn" disabled class="w-full bg-indigo-600 text-white py-3 px-4 rounded-lg hover:bg-indigo-700 transition flex items-center justify-center space-x-2">
                            <i class="fas fa-download"></i>
                            <span>Télécharger</span>
                        </button>

                        <!-- Image Info -->
                        <div id="imageInfo" class="mt-4 hidden">
                            <div class="bg-gray-50 p-4 rounded-lg">
                                <h4 class="font-medium mb-2">Informations sur l'image</h4>
                                <div class="grid grid-cols-2 gap-2 text-sm">
                                    <div>
                                        <span class="text-gray-500">Originale:</span>
                                        <span id="originalDimensions" class="font-medium"></span>
                                    </div>
                                    <div>
                                        <span class="text-gray-500">Redimensionné:</span>
                                        <span id="resizedDimensions" class="font-medium">-</span>
                                    </div>
                                    <div>
                                        <span class="text-gray-500">Taille du fichier:</span>
                                        <span id="fileSize" class="font-medium"></span>
                                    </div>
                                    <div>
                                        <span class="text-gray-500">Format:</span>
                                        <span id="fileFormat" class="font-medium"></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Compress Panel -->
                <div id="compressPanel" class="hidden grid md:grid-cols-2 gap-8">
                    <!-- Upload Section -->
                    <div>
                        <div id="compressDropzone" class="dropzone rounded-lg p-8 text-center cursor-pointer mb-6">
                            <div class="flex flex-col items-center justify-center space-y-4">
                                <i class="fas fa-cloud-upload-alt text-5xl text-indigo-500"></i>
                                <h3 class="text-xl font-semibold">Faites glisser et déposez votre image ici</h3>
                                <p class="text-gray-500">ou cliquez pour sélectionner</p>
                                <input type="file" id="compressFileInput" class="hidden" accept="image/*">
                                <button id="compressSelectFileBtn" class="bg-indigo-600 text-white px-6 py-2 rounded-lg hover:bg-indigo-700 transition">
                                    Sélectionner un fichier
                                </button>
                            </div>
                        </div>

                        <!-- Settings -->
                        <div class="bg-gray-50 p-6 rounded-lg">
                            <h3 class="font-semibold text-lg mb-4">Paramètres de compression</h3>
                            
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Qualité (0-100)</label>
                                    <input type="range" id="qualitySlider" min="0" max="100" value="80" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer">
                                    <div class="flex justify-between text-xs text-gray-500">
                                        <span>Faible</span>
                                        <span id="qualityValue">80%</span>
                                        <span>Haut</span>
                                    </div>
                                </div>

                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Format de sortie</label>
                                    <select id="outputFormat" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-indigo-500 focus:border-indigo-500 block w-full p-2.5">
                                        <option value="original">Même format original</option>
                                        <option value="jpeg">JPEG</option>
                                        <option value="png">PNG</option>
                                        <option value="webp">WebP</option>
                                    </select>
                                </div>

                                <div>
                                    <label class="flex items-center space-x-2">
                                        <input type="checkbox" id="preserveMetadata" class="w-4 h-4 text-indigo-600 bg-gray-100 border-gray-300 rounded focus:ring-indigo-500">
                                        <span class="text-sm font-medium text-gray-700">Maintenir les métadonnées (EXIF)</span>
                                    </label>
                                </div>

                                <div>
                                    <label class="flex items-center space-x-2">
                                        <input type="checkbox" id="optimizePalette" class="w-4 h-4 text-indigo-600 bg-gray-100 border-gray-300 rounded focus:ring-indigo-500">
                                        <span class="text-sm font-medium text-gray-700">Optimiser la palette de couleurs (PNG)</span>
                                    </label>
                                </div>

                                <button id="compressBtn" class="w-full bg-indigo-600 text-white py-2 px-4 rounded-lg hover:bg-indigo-700 transition">
                                    Compresser l'image
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Preview Section -->
                    <div>
                        <div class="border border-gray-200 rounded-lg p-4 mb-6">
                            <h3 class="font-semibold text-lg mb-4">Comparaison</h3>
                            <div class="grid grid-cols-2 gap-4 mb-4">
                                <div>
                                    <h4 class="text-center text-sm font-medium text-gray-700 mb-2">Originale</h4>
                                    <div id="originalPreview" class="flex items-center justify-center bg-gray-100 rounded-lg min-h-64">
                                        <p class="text-gray-500 text-center p-8">Originale</p>
                                    </div>
                                    <div class="mt-2 text-center text-sm">
                                        <span class="text-gray-500">Taille: </span>
                                        <span id="originalSize" class="font-medium">-</span>
                                    </div>
                                </div>
                                <div>
                                    <h4 class="text-center text-sm font-medium text-gray-700 mb-2">Compressé</h4>
                                    <div id="compressedPreview" class="flex items-center justify-center bg-gray-100 rounded-lg min-h-64">
                                        <p class="text-gray-500 text-center p-8">Compressé</p>
                                    </div>
                                    <div class="mt-2 text-center text-sm">
                                        <span class="text-gray-500">Taille: </span>
                                        <span id="compressedSize" class="font-medium">-</span>
                                    </div>
                                </div>
                            </div>

                            <div class="bg-gray-50 p-4 rounded-lg">
                                <h4 class="font-medium mb-2">Économie d'espace</h4>
                                <div class="flex items-center mb-2">
                                    <div class="w-full bg-gray-200 rounded-full h-4">
                                        <div id="savingsBar" class="bg-green-500 h-4 rounded-full" style="width: 0%"></div>
                                    </div>
                                    <span id="savingsPercent" class="ml-2 text-sm font-medium text-gray-700">0%</span>
                                </div>
                                <div class="grid grid-cols-2 gap-2 text-sm">
                                    <div>
                                        <span class="text-gray-500">Taille originale:</span>
                                        <span id="originalSizeFull" class="font-medium">-</span>
                                    </div>
                                    <div>
                                        <span class="text-gray-500">Taille compressée :</span>
                                        <span id="compressedSizeFull" class="font-medium">-</span>
                                    </div>
                                    <div>
                                        <span class="text-gray-500">Économie:</span>
                                        <span id="savingsAmount" class="font-medium">-</span>
                                    </div>
                                    <div>
                                        <span class="text-gray-500">Format:</span>
                                        <span id="compressedFormat" class="font-medium">-</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Download Button -->
                        <button id="downloadCompressedBtn" disabled class="w-full bg-indigo-600 text-white py-3 px-4 rounded-lg hover:bg-indigo-700 transition flex items-center justify-center space-x-2">
                            <i class="fas fa-download"></i>
                            <span>Télécharger</span>
                        </button>
                    </div>
                </div>

               <!-- Panneau de suppression de l'arrière-plan -->
<div id="bgRemovePanel" class="hidden grid md:grid-cols-2 gap-8">
    <!-- Section de téléversement -->
    <div>
        <div id="bgRemoveDropzone" class="dropzone rounded-lg p-8 text-center cursor-pointer mb-6">
            <div class="flex flex-col items-center justify-center space-y-4">
                <i class="fas fa-cloud-upload-alt text-5xl text-indigo-500"></i>
                <h3 class="text-xl font-semibold">Glissez-déposez votre image ici</h3>
                <p class="text-gray-500">ou cliquez pour sélectionner</p>
                <input type="file" id="bgRemoveFileInput" class="hidden" accept="image/*">
                <button id="bgRemoveSelectFileBtn" class="bg-indigo-600 text-white px-6 py-2 rounded-lg hover:bg-indigo-700 transition">
                    Sélectionner un fichier
                </button>
            </div>
        </div>

        <!-- Paramètres -->
        <div class="bg-gray-50 p-6 rounded-lg">
            <h3 class="font-semibold text-lg mb-4">Paramètres de suppression de l’arrière-plan</h3>

            <div class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Précision</label>
                    <input type="range" id="precisionSlider" min="1" max="10" value="7" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer">
                    <div class="flex justify-between text-xs text-gray-500">
                        <span>Rapide</span>
                        <span id="precisionValue">7/10</span>
                        <span>Précis</span>
                    </div>
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Couleur d’arrière-plan</label>
                    <select id="bgColor" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-indigo-500 focus:border-indigo-500 block w-full p-2.5">
                        <option value="transparent">Transparent</option>
                        <option value="white">Blanc</option>
                        <option value="black">Noir</option>
                        <option value="custom">Personnalisé</option>
                    </select>
                </div>

                <div id="bgCustomColorContainer" class="hidden">
                    <label class="block text-sm font-medium text-gray-700 mb-1">Couleur personnalisée</label>
                    <input type="color" id="bgCustomColor" value="#ffffff" class="w-full h-10">
                </div>

                <div>
                    <label class="flex items-center space-x-2">
                        <input type="checkbox" id="edgeRefinement" checked class="w-4 h-4 text-indigo-600 bg-gray-100 border-gray-300 rounded focus:ring-indigo-500">
                        <span class="text-sm font-medium text-gray-700">Affinage des bords</span>
                    </label>
                </div>

                <div>
                    <label class="flex items-center space-x-2">
                        <input type="checkbox" id="autoCrop" class="w-4 h-4 text-indigo-600 bg-gray-100 border-gray-300 rounded focus:ring-indigo-500">
                        <span class="text-sm font-medium text-gray-700">Rogner automatiquement</span>
                    </label>
                </div>

                <button id="removeBgBtn" class="w-full bg-indigo-600 text-white py-2 px-4 rounded-lg hover:bg-indigo-700 transition">
                    Supprimer l’arrière-plan
                </button>
            </div>
        </div>
    </div>

    <!-- Section d’aperçu -->
    <div>
        <div class="border border-gray-200 rounded-lg p-4 mb-6">
            <h3 class="font-semibold text-lg mb-4">Résultat</h3>
            <div class="grid grid-cols-2 gap-4 mb-4">
                <div>
                    <h4 class="text-center text-sm font-medium text-gray-700 mb-2">Original</h4>
                    <div id="originalBgPreview" class="flex items-center justify-center bg-gray-100 rounded-lg min-h-64">
                        <p class="text-gray-500 text-center p-8">Original</p>
                    </div>
                </div>
                <div>
                    <h4 class="text-center text-sm font-medium text-gray-700 mb-2">Sans arrière-plan</h4>
                    <div id="bgRemovedPreview" class="flex items-center justify-center bg-gray-100 rounded-lg min-h-64 transparent-bg">
                        <p class="text-gray-500 text-center p-8">Sans arrière-plan</p>
                    </div>
                </div>
            </div>

            <div class="bg-gray-50 p-4 rounded-lg">
                <h4 class="font-medium mb-2">Informations</h4>
                <div class="grid grid-cols-2 gap-2 text-sm">
                    <div>
                        <span class="text-gray-500">Taille originale :</span>
                        <span id="originalBgSize" class="font-medium">-</span>
                    </div>
                    <div>
                        <span class="text-gray-500">Taille après traitement :</span>
                        <span id="processedBgSize" class="font-medium">-</span>
                    </div>
                    <div>
                        <span class="text-gray-500">Dimensions :</span>
                        <span id="bgDimensions" class="font-medium">-</span>
                    </div>
                    <div>
                        <span class="text-gray-500">Format :</span>
                        <span id="bgFormat" class="font-medium">PNG</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Barre de progression -->
        <div id="bgProgressContainer" class="hidden mb-6">
            <div class="flex justify-between mb-1">
                <span class="text-sm font-medium text-gray-700">Traitement en cours...</span>
                <span id="bgProgressPercent" class="text-sm font-medium text-gray-700">0%</span>
            </div>
            <div class="w-full bg-gray-200 rounded-full h-2.5">
                <div id="bgProgressBar" class="progress-bar bg-indigo-600 h-2.5 rounded-full" style="width: 0%"></div>
            </div>
        </div>

        <!-- Bouton de téléchargement -->
        <button id="downloadBgRemovedBtn" disabled class="w-full bg-indigo-600 text-white py-3 px-4 rounded-lg hover:bg-indigo-700 transition flex items-center justify-center space-x-2">
            <i class="fas fa-download"></i>
            <span>Télécharger</span>
        </button>
    </div>
</div>

            <!-- Footer -->
            <div class="bg-gray-50 px-8 py-4 text-center text-sm text-gray-500">
                <p>© 2025 Img Tools Pro |By Pedagotools</p>
            </div>
			
			<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8988637729605842"
     crossorigin="anonymous"></script>
	 
	 <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8988637729605842"
     crossorigin="anonymous"></script>
<!-- ads -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-8988637729605842"
     data-ad-slot="6382756115"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>


        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Resize elements
            const fileInput = document.getElementById('fileInput');
            const selectFileBtn = document.getElementById('selectFileBtn');
            const dropzone = document.getElementById('dropzone');
            const previewContainer = document.getElementById('previewContainer');
            const downloadBtn = document.getElementById('downloadBtn');
            const progressContainer = document.getElementById('progressContainer');
            const progressBar = document.getElementById('progressBar');
            const progressPercent = document.getElementById('progressPercent');
            const imageInfo = document.getElementById('imageInfo');
            const originalDimensions = document.getElementById('originalDimensions');
            const resizedDimensions = document.getElementById('resizedDimensions');
            const fileSize = document.getElementById('fileSize');
            const fileFormat = document.getElementById('fileFormat');
            const upscaleCheckbox = document.getElementById('upscaleCheckbox');
            const paddingColor = document.getElementById('paddingColor');
            const customColorContainer = document.getElementById('customColorContainer');
            const customColor = document.getElementById('customColor');
            const outputWidth = document.getElementById('outputWidth');
            const outputHeight = document.getElementById('outputHeight');
            const resizeMode = document.getElementById('resizeMode');
            const applyBtn = document.getElementById('applyBtn');

            // Compress elements
            const compressFileInput = document.getElementById('compressFileInput');
            const compressSelectFileBtn = document.getElementById('compressSelectFileBtn');
            const compressDropzone = document.getElementById('compressDropzone');
            const originalPreview = document.getElementById('originalPreview');
            const compressedPreview = document.getElementById('compressedPreview');
            const downloadCompressedBtn = document.getElementById('downloadCompressedBtn');
            const qualitySlider = document.getElementById('qualitySlider');
            const qualityValue = document.getElementById('qualityValue');
            const outputFormat = document.getElementById('outputFormat');
            const preserveMetadata = document.getElementById('preserveMetadata');
            const optimizePalette = document.getElementById('optimizePalette');
            const compressBtn = document.getElementById('compressBtn');
            const originalSize = document.getElementById('originalSize');
            const originalSizeFull = document.getElementById('originalSizeFull');
            const compressedSize = document.getElementById('compressedSize');
            const compressedSizeFull = document.getElementById('compressedSizeFull');
            const savingsAmount = document.getElementById('savingsAmount');
            const savingsPercent = document.getElementById('savingsPercent');
            const savingsBar = document.getElementById('savingsBar');
            const compressedFormat = document.getElementById('compressedFormat');

            // Background Remove elements
            const bgRemoveFileInput = document.getElementById('bgRemoveFileInput');
            const bgRemoveSelectFileBtn = document.getElementById('bgRemoveSelectFileBtn');
            const bgRemoveDropzone = document.getElementById('bgRemoveDropzone');
            const originalBgPreview = document.getElementById('originalBgPreview');
            const bgRemovedPreview = document.getElementById('bgRemovedPreview');
            const downloadBgRemovedBtn = document.getElementById('downloadBgRemovedBtn');
            const precisionSlider = document.getElementById('precisionSlider');
            const precisionValue = document.getElementById('precisionValue');
            const bgColor = document.getElementById('bgColor');
            const bgCustomColorContainer = document.getElementById('bgCustomColorContainer');
            const bgCustomColor = document.getElementById('bgCustomColor');
            const edgeRefinement = document.getElementById('edgeRefinement');
            const autoCrop = document.getElementById('autoCrop');
            const removeBgBtn = document.getElementById('removeBgBtn');
            const originalBgSize = document.getElementById('originalBgSize');
            const processedBgSize = document.getElementById('processedBgSize');
            const bgDimensions = document.getElementById('bgDimensions');
            const bgFormat = document.getElementById('bgFormat');
            const bgProgressContainer = document.getElementById('bgProgressContainer');
            const bgProgressBar = document.getElementById('bgProgressBar');
            const bgProgressPercent = document.getElementById('bgProgressPercent');

            // Tab elements
            const resizeTab = document.getElementById('resizeTab');
            const compressTab = document.getElementById('compressTab');
            const bgRemoveTab = document.getElementById('bgRemoveTab');
            const resizePanel = document.getElementById('resizePanel');
            const compressPanel = document.getElementById('compressPanel');
            const bgRemovePanel = document.getElementById('bgRemovePanel');

            // Shared variables
            let originalImage = null;
            let processedImage = null;
            let compressedImageBlob = null;
            let bgRemovedImageBlob = null;
            let originalFile = null;

            // Tab switching
            resizeTab.addEventListener('click', () => {
                resizeTab.classList.add('active');
                compressTab.classList.remove('active');
                bgRemoveTab.classList.remove('active');
                resizePanel.classList.remove('hidden');
                compressPanel.classList.add('hidden');
                bgRemovePanel.classList.add('hidden');
            });

            compressTab.addEventListener('click', () => {
                compressTab.classList.add('active');
                resizeTab.classList.remove('active');
                bgRemoveTab.classList.remove('active');
                compressPanel.classList.remove('hidden');
                resizePanel.classList.add('hidden');
                bgRemovePanel.classList.add('hidden');
            });

            bgRemoveTab.addEventListener('click', () => {
                bgRemoveTab.classList.add('active');
                resizeTab.classList.remove('active');
                compressTab.classList.remove('active');
                bgRemovePanel.classList.remove('hidden');
                resizePanel.classList.add('hidden');
                compressPanel.classList.add('hidden');
            });

            // Quality slider update
            qualitySlider.addEventListener('input', function() {
                qualityValue.textContent = this.value + '%';
            });

            // Precision slider update
            precisionSlider.addEventListener('input', function() {
                precisionValue.textContent = this.value + '/10';
            });

            // Background color selection
            bgColor.addEventListener('change', function() {
                if (this.value === 'custom') {
                    bgCustomColorContainer.classList.remove('hidden');
                } else {
                    bgCustomColorContainer.classList.add('hidden');
                }
            });

            // Resize event listeners
            selectFileBtn.addEventListener('click', () => fileInput.click());
            fileInput.addEventListener('change', handleFileSelect);
            dropzone.addEventListener('dragover', handleDragOver);
            dropzone.addEventListener('dragleave', handleDragLeave);
            dropzone.addEventListener('drop', handleDrop);
            downloadBtn.addEventListener('click', downloadImage);
            paddingColor.addEventListener('change', updatePaddingColor);
            upscaleCheckbox.addEventListener('change', () => {
                if (originalImage) processImage();
            });
            applyBtn.addEventListener('click', () => {
                if (originalImage) processImage();
            });

            // Compress event listeners
            compressSelectFileBtn.addEventListener('click', () => compressFileInput.click());
            compressFileInput.addEventListener('change', handleCompressFileSelect);
            compressDropzone.addEventListener('dragover', handleCompressDragOver);
            compressDropzone.addEventListener('dragleave', handleCompressDragLeave);
            compressDropzone.addEventListener('drop', handleCompressDrop);
            downloadCompressedBtn.addEventListener('click', downloadCompressedImage);
            compressBtn.addEventListener('click', compressImage);

            // Background Remove event listeners
            bgRemoveSelectFileBtn.addEventListener('click', () => bgRemoveFileInput.click());
            bgRemoveFileInput.addEventListener('change', handleBgRemoveFileSelect);
            bgRemoveDropzone.addEventListener('dragover', handleBgRemoveDragOver);
            bgRemoveDropzone.addEventListener('dragleave', handleBgRemoveDragLeave);
            bgRemoveDropzone.addEventListener('drop', handleBgRemoveDrop);
            downloadBgRemovedBtn.addEventListener('click', downloadBgRemovedImage);
            removeBgBtn.addEventListener('click', removeBackground);

            // Handle file selection (for resize)
            function handleFileSelect(e) {
                const file = e.target.files[0] || (e.dataTransfer && e.dataTransfer.files[0]);
                if (!file) return;
                
                if (!file.type.match('image.*')) {
                    alert('Por favor, selecione um arquivo de imagem.');
                    return;
                }

                originalFile = file;
                loadImage(file);
            }

            // Handle file selection (for compress)
            function handleCompressFileSelect(e) {
                const file = e.target.files[0] || (e.dataTransfer && e.dataTransfer.files[0]);
                if (!file) return;
                
                if (!file.type.match('image.*')) {
                    alert('Por favor, selecione um arquivo de imagem.');
                    return;
                }

                originalFile = file;
                loadCompressImage(file);
            }

            // Handle file selection (for background remove)
            function handleBgRemoveFileSelect(e) {
                const file = e.target.files[0] || (e.dataTransfer && e.dataTransfer.files[0]);
                if (!file) return;
                
                if (!file.type.match('image.*')) {
                    alert('Por favor, selecione um arquivo de imagem.');
                    return;
                }

                originalFile = file;
                loadBgRemoveImage(file);
            }

            // Drag and drop handlers (for resize)
            function handleDragOver(e) {
                e.preventDefault();
                e.stopPropagation();
                dropzone.classList.add('active');
            }

            function handleDragLeave(e) {
                e.preventDefault();
                e.stopPropagation();
                dropzone.classList.remove('active');
            }

            function handleDrop(e) {
                e.preventDefault();
                e.stopPropagation();
                dropzone.classList.remove('active');
                
                const file = e.dataTransfer.files[0];
                if (!file.type.match('image.*')) {
                    alert('Por favor, solte um arquivo de imagem.');
                    return;
                }
                
                originalFile = file;
                loadImage(file);
            }

            // Drag and drop handlers (for compress)
            function handleCompressDragOver(e) {
                e.preventDefault();
                e.stopPropagation();
                compressDropzone.classList.add('active');
            }

            function handleCompressDragLeave(e) {
                e.preventDefault();
                e.stopPropagation();
                compressDropzone.classList.remove('active');
            }

            function handleCompressDrop(e) {
                e.preventDefault();
                e.stopPropagation();
                compressDropzone.classList.remove('active');
                
                const file = e.dataTransfer.files[0];
                if (!file.type.match('image.*')) {
                    alert('Por favor, solte um arquivo de imagem.');
                    return;
                }
                
                originalFile = file;
                loadCompressImage(file);
            }

            // Drag and drop handlers (for background remove)
            function handleBgRemoveDragOver(e) {
                e.preventDefault();
                e.stopPropagation();
                bgRemoveDropzone.classList.add('active');
            }

            function handleBgRemoveDragLeave(e) {
                e.preventDefault();
                e.stopPropagation();
                bgRemoveDropzone.classList.remove('active');
            }

            function handleBgRemoveDrop(e) {
                e.preventDefault();
                e.stopPropagation();
                bgRemoveDropzone.classList.remove('active');
                
                const file = e.dataTransfer.files[0];
                if (!file.type.match('image.*')) {
                    alert('Por favor, solte um arquivo de imagem.');
                    return;
                }
                
                originalFile = file;
                loadBgRemoveImage(file);
            }

            // Load image and display preview (for resize)
            function loadImage(file) {
                const reader = new FileReader();
                
                reader.onload = function(e) {
                    originalImage = new Image();
                    originalImage.onload = function() {
                        displayOriginalPreview();
                        processImage();
                        
                        // Update image info
                        originalDimensions.textContent = `${originalImage.width}x${originalImage.height}px`;
                        fileSize.textContent = formatFileSize(file.size);
                        fileFormat.textContent = file.type.split('/')[1].toUpperCase();
                        imageInfo.classList.remove('hidden');
                    };
                    originalImage.src = e.target.result;
                };
                
                reader.readAsDataURL(file);
            }

            // Load image and display preview (for compress)
            function loadCompressImage(file) {
                const reader = new FileReader();
                
                reader.onload = function(e) {
                    // Display original preview
                    originalPreview.innerHTML = '';
                    const img = document.createElement('img');
                    img.src = e.target.result;
                    img.classList.add('image-preview', 'max-w-full', 'rounded-lg');
                    originalPreview.appendChild(img);
                    
                    // Update file info
                    originalSize.textContent = formatFileSize(file.size);
                    originalSizeFull.textContent = formatFileSize(file.size);
                    compressedSize.textContent = '-';
                    compressedSizeFull.textContent = '-';
                    savingsAmount.textContent = '-';
                    savingsPercent.textContent = '0%';
                    savingsBar.style.width = '0%';
                    
                    // Reset compressed preview
                    compressedPreview.innerHTML = '';
                    const placeholder = document.createElement('p');
                    placeholder.className = 'text-gray-500 text-center p-8';
                    placeholder.textContent = 'Comprimida';
                    compressedPreview.appendChild(placeholder);
                    
                    // Enable compress button
                    downloadCompressedBtn.disabled = true;
                };
                
                reader.readAsDataURL(file);
            }

            // Load image and display preview (for background remove)
            function loadBgRemoveImage(file) {
                const reader = new FileReader();
                
                reader.onload = function(e) {
                    // Display original preview
                    originalBgPreview.innerHTML = '';
                    const img = document.createElement('img');
                    img.src = e.target.result;
                    img.classList.add('image-preview', 'max-w-full', 'rounded-lg');
                    originalBgPreview.appendChild(img);
                    
                    // Update file info
                    originalBgSize.textContent = formatFileSize(file.size);
                    processedBgSize.textContent = '-';
                    
                    // Reset processed preview
                    bgRemovedPreview.innerHTML = '';
                    const placeholder = document.createElement('p');
                    placeholder.className = 'text-gray-500 text-center p-8';
                    placeholder.textContent = 'Sem fundo';
                    bgRemovedPreview.appendChild(placeholder);
                    
                    // Enable remove background button
                    downloadBgRemovedBtn.disabled = true;
                };
                
                reader.readAsDataURL(file);
            }

            // Display original preview (for resize)
            function displayOriginalPreview() {
                previewContainer.innerHTML = '';
                const img = document.createElement('img');
                img.src = originalImage.src;
                img.classList.add('image-preview', 'max-w-full', 'rounded-lg');
                previewContainer.appendChild(img);
            }

            // Process image (resize and upscale)
            function processImage() {
                if (!originalImage) return;
                
                // Show progress
                progressContainer.classList.remove('hidden');
                updateProgress(0);
                
                // Simulate progress (in a real app, this would be the actual processing steps)
                let progress = 0;
                const progressInterval = setInterval(() => {
                    progress += 5;
                    updateProgress(progress);
                    
                    if (progress >= 100) {
                        clearInterval(progressInterval);
                        setTimeout(() => finishProcessing(), 300);
                    }
                }, 100);
            }

            function finishProcessing() {
                // Create canvas for processing
                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');
                
                // Get output dimensions
                const targetWidth = parseInt(outputWidth.value);
                const targetHeight = parseInt(outputHeight.value);
                
                // Set canvas size to target dimensions
                canvas.width = targetWidth;
                canvas.height = targetHeight;
                
                // Get padding color
                let paddingColorValue = 'transparent';
                if (paddingColor.value === 'white') {
                    paddingColorValue = '#ffffff';
                } else if (paddingColor.value === 'black') {
                    paddingColorValue = '#000000';
                } else if (paddingColor.value === 'custom') {
                    paddingColorValue = customColor.value;
                }
                
                // Fill with padding color if not transparent
                if (paddingColorValue !== 'transparent') {
                    ctx.fillStyle = paddingColorValue;
                    ctx.fillRect(0, 0, canvas.width, canvas.height);
                }
                
                // Handle different resize modes
                const mode = resizeMode.value;
                
                if (mode === 'fit') {
                    // Fit mode - maintain aspect ratio with padding
                    const aspectRatio = originalImage.width / originalImage.height;
                    const targetAspectRatio = targetWidth / targetHeight;
                    
                    let drawWidth, drawHeight, offsetX = 0, offsetY = 0;
                    
                    if (aspectRatio > targetAspectRatio) {
                        // Image is wider than target
                        drawWidth = targetWidth;
                        drawHeight = targetWidth / aspectRatio;
                        offsetY = (targetHeight - drawHeight) / 2;
                    } else {
                        // Image is taller than target
                        drawHeight = targetHeight;
                        drawWidth = targetHeight * aspectRatio;
                        offsetX = (targetWidth - drawWidth) / 2;
                    }
                    
                    // Apply upscaling if needed and checked
                    if (upscaleCheckbox.checked && (drawWidth > originalImage.width || drawHeight > originalImage.height)) {
                        ctx.imageSmoothingQuality = 'high';
                        ctx.drawImage(originalImage, offsetX, offsetY, drawWidth, drawHeight);
                    } else {
                        ctx.drawImage(originalImage, offsetX, offsetY, drawWidth, drawHeight);
                    }
                } else if (mode === 'fill') {
                    // Fill mode - crop to fill entire area
                    const sourceAspect = originalImage.width / originalImage.height;
                    const targetAspect = targetWidth / targetHeight;
                    
                    let srcX = 0, srcY = 0, srcWidth = originalImage.width, srcHeight = originalImage.height;
                    
                    if (sourceAspect > targetAspect) {
                        // Source is wider than target in proportion
                        srcHeight = originalImage.height;
                        srcWidth = originalImage.height * targetAspect;
                        srcX = (originalImage.width - srcWidth) / 2;
                    } else {
                        // Source is taller than target in proportion
                        srcWidth = originalImage.width;
                        srcHeight = originalImage.width / targetAspect;
                        srcY = (originalImage.height - srcHeight) / 2;
                    }
                    
                    ctx.imageSmoothingQuality = 'high';
                    ctx.drawImage(
                        originalImage, 
                        srcX, srcY, srcWidth, srcHeight, // source rectangle
                        0, 0, targetWidth, targetHeight   // destination rectangle
                    );
                } else if (mode === 'stretch') {
                    // Stretch mode - ignore aspect ratio
                    ctx.imageSmoothingQuality = 'high';
                    ctx.drawImage(originalImage, 0, 0, targetWidth, targetHeight);
                }
                
                // Update preview
                processedImage = new Image();
                processedImage.onload = function() {
                    previewContainer.innerHTML = '';
                    const img = document.createElement('img');
                    img.src = processedImage.src;
                    img.classList.add('image-preview', 'max-w-full', 'rounded-lg');
                    previewContainer.appendChild(img);
                    
                    // Update resized dimensions
                    resizedDimensions.textContent = `${targetWidth}x${targetHeight}px`;
                    
                    // Enable download button
                    downloadBtn.disabled = false;
                    progressContainer.classList.add('hidden');
                };
                processedImage.src = canvas.toDataURL('image/png');
            }

            // Compress image
            function compressImage() {
                if (!originalFile) return;
                
                const reader = new FileReader();
                reader.onload = function(e) {
                    const img = new Image();
                    img.onload = function() {
                        const canvas = document.createElement('canvas');
                        const ctx = canvas.getContext('2d');
                        
                        // Set canvas dimensions to image dimensions
                        canvas.width = img.width;
                        canvas.height = img.height;
                        ctx.drawImage(img, 0, 0);
                        
                        // Get quality (convert from 0-100 to 0-1 for WebP)
                        const quality = qualitySlider.value / 100;
                        
                        // Get output format
                        let format = outputFormat.value;
                        if (format === 'original') {
                            format = originalFile.type.split('/')[1];
                        }
                        
                        // Compress image
                        let mimeType;
                        switch(format) {
                            case 'jpeg':
                                mimeType = 'image/jpeg';
                                break;
                            case 'png':
                                mimeType = 'image/png';
                                break;
                            case 'webp':
                                mimeType = 'image/webp';
                                break;
                            default:
                                mimeType = 'image/jpeg';
                        }
                        
                        // For PNG, we might want to reduce colors if the option is checked
                        if (format === 'png' && optimizePalette.checked) {
                            // This is a simplified approach - in a real app you'd use more sophisticated quantization
                            canvas.toBlob(function(blob) {
                                displayCompressedResult(blob);
                            }, mimeType);
                        } else {
                            // For other formats or PNG without palette optimization
                            canvas.toBlob(function(blob) {
                                displayCompressedResult(blob);
                            }, mimeType, quality);
                        }
                    };
                    img.src = e.target.result;
                };
                reader.readAsDataURL(originalFile);
            }

            // Remove background from image
            function removeBackground() {
                if (!originalFile) return;
                
                // Show progress
                bgProgressContainer.classList.remove('hidden');
                updateBgProgress(0);
                
                // Simulate progress (in a real app, this would call a real background removal API)
                let progress = 0;
                const progressInterval = setInterval(() => {
                    progress += 5;
                    updateBgProgress(progress);
                    
                    if (progress >= 100) {
                        clearInterval(progressInterval);
                        setTimeout(() => finishBgRemoval(), 300);
                    }
                }, 100);
            }

            function finishBgRemoval() {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const img = new Image();
                    img.onload = function() {
                        const canvas = document.createElement('canvas');
                        const ctx = canvas.getContext('2d');
                        
                        // Set canvas dimensions to image dimensions
                        canvas.width = img.width;
                        canvas.height = img.height;
                        
                        // Draw the image
                        ctx.drawImage(img, 0, 0);
                        
                        // Get image data
                        const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
                        const data = imageData.data;
                        
                        // SIMPLE BACKGROUND REMOVAL (for demo purposes)
                        // In a real app, you would use a more sophisticated algorithm or API
                        
                        // Get the color at the corners (assuming the background is uniform)
                        const topLeftColor = getPixelColor(data, 0, 0, canvas.width);
                        const topRightColor = getPixelColor(data, canvas.width-1, 0, canvas.width);
                        const bottomLeftColor = getPixelColor(data, 0, canvas.height-1, canvas.width);
                        const bottomRightColor = getPixelColor(data, canvas.width-1, canvas.height-1, canvas.width);
                        
                        // Average the corner colors to get the background color
                        const bgColor = averageColors([topLeftColor, topRightColor, bottomLeftColor, bottomRightColor]);
                        
                        // Remove background (make pixels transparent if they match the background color)
                        const tolerance = 30; // Color matching tolerance
                        
                        for (let i = 0; i < data.length; i += 4) {
                            const r = data[i];
                            const g = data[i + 1];
                            const b = data[i + 2];
                            
                            // Calculate color distance from background
                            const distance = Math.sqrt(
                                Math.pow(r - bgColor.r, 2) +
                                Math.pow(g - bgColor.g, 2) +
                                Math.pow(b - bgColor.b, 2)
                            );
                            
                            // If the color is close to the background, make it transparent
                            if (distance < tolerance) {
                                data[i + 3] = 0; // Set alpha to 0 (transparent)
                            }
                        }
                        
                        // Put the modified data back
                        ctx.putImageData(imageData, 0, 0);
                        
                        // Apply background color if not transparent
                        const selectedBgColor = bgColor.value;
                        let bgColorValue = 'transparent';
                        
                        if (selectedBgColor === 'white') {
                            bgColorValue = '#ffffff';
                        } else if (selectedBgColor === 'black') {
                            bgColorValue = '#000000';
                        } else if (selectedBgColor === 'custom') {
                            bgColorValue = bgCustomColor.value;
                        }
                        
                        if (bgColorValue !== 'transparent') {
                            // Create a new canvas with the background color
                            const bgCanvas = document.createElement('canvas');
                            bgCanvas.width = canvas.width;
                            bgCanvas.height = canvas.height;
                            const bgCtx = bgCanvas.getContext('2d');
                            
                            // Fill with background color
                            bgCtx.fillStyle = bgColorValue;
                            bgCtx.fillRect(0, 0, bgCanvas.width, bgCanvas.height);
                            
                            // Draw the image with transparency on top
                            bgCtx.drawImage(canvas, 0, 0);
                            
                            // Use this canvas for the final result
                            canvas.width = bgCanvas.width;
                            canvas.height = bgCanvas.height;
                            ctx.drawImage(bgCanvas, 0, 0);
                        }
                        
                        // Auto crop if selected
                        if (autoCrop.checked) {
                            // Get the bounding box of non-transparent pixels
                            const bbox = getNonTransparentBoundingBox(imageData);
                            
                            if (bbox.width > 0 && bbox.height > 0) {
                                // Create a new canvas with just the cropped area
                                const croppedCanvas = document.createElement('canvas');
                                croppedCanvas.width = bbox.width;
                                croppedCanvas.height = bbox.height;
                                const croppedCtx = croppedCanvas.getContext('2d');
                                
                                // Draw the cropped area
                                croppedCtx.drawImage(
                                    canvas,
                                    bbox.x, bbox.y, bbox.width, bbox.height,
                                    0, 0, bbox.width, bbox.height
                                );
                                
                                // Use the cropped canvas
                                canvas.width = croppedCanvas.width;
                                canvas.height = croppedCanvas.height;
                                ctx.drawImage(croppedCanvas, 0, 0);
                            }
                        }
                        
                        // Convert to PNG (to preserve transparency)
                        canvas.toBlob(function(blob) {
                            bgRemovedImageBlob = blob;
                            
                            // Create object URL for the processed image
                            const processedUrl = URL.createObjectURL(blob);
                            
                            // Display processed preview
                            bgRemovedPreview.innerHTML = '';
                            const processedImg = document.createElement('img');
                            processedImg.src = processedUrl;
                            processedImg.classList.add('image-preview', 'max-w-full', 'rounded-lg');
                            bgRemovedPreview.appendChild(processedImg);
                            
                            // Update file info
                            processedBgSize.textContent = formatFileSize(blob.size);
                            bgDimensions.textContent = `${canvas.width}x${canvas.height}px`;
                            
                            // Enable download button
                            downloadBgRemovedBtn.disabled = false;
                            bgProgressContainer.classList.add('hidden');
                        }, 'image/png');
                    };
                    img.src = e.target.result;
                };
                reader.readAsDataURL(originalFile);
            }

            // Helper function to get pixel color
            function getPixelColor(data, x, y, width) {
                const index = (y * width + x) * 4;
                return {
                    r: data[index],
                    g: data[index + 1],
                    b: data[index + 2],
                    a: data[index + 3]
                };
            }

            // Helper function to average colors
            function averageColors(colors) {
                let r = 0, g = 0, b = 0;
                for (const color of colors) {
                    r += color.r;
                    g += color.g;
                    b += color.b;
                }
                return {
                    r: Math.round(r / colors.length),
                    g: Math.round(g / colors.length),
                    b: Math.round(b / colors.length)
                };
            }

            // Helper function to get bounding box of non-transparent pixels
            function getNonTransparentBoundingBox(imageData) {
                const data = imageData.data;
                const width = imageData.width;
                const height = imageData.height;
                
                let minX = width;
                let minY = height;
                let maxX = 0;
                let maxY = 0;
                
                for (let y = 0; y < height; y++) {
                    for (let x = 0; x < width; x++) {
                        const index = (y * width + x) * 4;
                        if (data[index + 3] > 0) { // If pixel is not transparent
                            if (x < minX) minX = x;
                            if (x > maxX) maxX = x;
                            if (y < minY) minY = y;
                            if (y > maxY) maxY = y;
                        }
                    }
                }
                
                // If no non-transparent pixels found
                if (minX > maxX || minY > maxY) {
                    return { x: 0, y: 0, width: 0, height: 0 };
                }
                
                return {
                    x: minX,
                    y: minY,
                    width: maxX - minX + 1,
                    height: maxY - minY + 1
                };
            }

            // Display compressed result and savings
            function displayCompressedResult(blob) {
                compressedImageBlob = blob;
                
                // Create object URL for the compressed image
                const compressedUrl = URL.createObjectURL(blob);
                
                // Display compressed preview
                compressedPreview.innerHTML = '';
                const img = document.createElement('img');
                img.src = compressedUrl;
                img.classList.add('image-preview', 'max-w-full', 'rounded-lg');
                compressedPreview.appendChild(img);
                
                // Calculate savings
                const originalSizeBytes = originalFile.size;
                const compressedSizeBytes = blob.size;
                const savings = originalSizeBytes - compressedSizeBytes;
                const savingsPercentage = Math.round((savings / originalSizeBytes) * 100);
                
                // Update savings display
                compressedSize.textContent = formatFileSize(compressedSizeBytes);
                compressedSizeFull.textContent = formatFileSize(compressedSizeBytes);
                savingsAmount.textContent = formatFileSize(savings);
                savingsPercent.textContent = savingsPercentage + '%';
                savingsBar.style.width = savingsPercentage + '%';
                
                // Update format display
                let format = outputFormat.value;
                if (format === 'original') {
                    format = originalFile.type.split('/')[1];
                }
                compressedFormat.textContent = format.toUpperCase();
                
                // Enable download button
                downloadCompressedBtn.disabled = false;
            }

            // Update progress bar
            function updateProgress(percent) {
                progressBar.style.width = `${percent}%`;
                progressPercent.textContent = `${percent}%`;
            }

            // Update background removal progress bar
            function updateBgProgress(percent) {
                bgProgressBar.style.width = `${percent}%`;
                bgProgressPercent.textContent = `${percent}%`;
            }

            // Download processed image (resize)
            function downloadImage() {
                if (!processedImage) return;
                
                const link = document.createElement('a');
                link.download = 'imagem-redimensionada.png';
                link.href = processedImage.src;
                link.click();
            }

            // Download compressed image
            function downloadCompressedImage() {
                if (!compressedImageBlob) return;
                
                const link = document.createElement('a');
                let format = outputFormat.value;
                if (format === 'original') {
                    format = originalFile.type.split('/')[1];
                }
                
                // Get original filename without extension
                const originalName = originalFile.name.split('.').slice(0, -1).join('.');
                link.download = `${originalName}-comprimida.${format}`;
                link.href = URL.createObjectURL(compressedImageBlob);
                link.click();
            }

            // Download background removed image
            function downloadBgRemovedImage() {
                if (!bgRemovedImageBlob) return;
                
                const link = document.createElement('a');
                
                // Get original filename without extension
                const originalName = originalFile.name.split('.').slice(0, -1).join('.');
                link.download = `${originalName}-sem-fundo.png`;
                link.href = URL.createObjectURL(bgRemovedImageBlob);
                link.click();
            }

            // Format file size
            function formatFileSize(bytes) {
                if (bytes === 0) return '0 Bytes';
                
                const k = 1024;
                const sizes = ['Bytes', 'KB', 'MB', 'GB'];
                const i = Math.floor(Math.log(bytes) / Math.log(k));
                
                return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
            }

            // Update padding color options
            function updatePaddingColor() {
                if (paddingColor.value === 'custom') {
                    customColorContainer.classList.remove('hidden');
                } else {
                    customColorContainer.classList.add('hidden');
                }
            }
        });
    </script>
<p style="border-radius: 8px; text-align: center; font-size: 12px; color: #fff; margin-top: 16px;position: fixed; left: 8px; bottom: 8px; z-index: 10; background: rgba(0, 0, 0, 0.8); padding: 4px 8px;">Made with <img src="https://www.svgrepo.com/show/501921/love.svg" alt="DeepSite Logo" style="width: 16px; height: 16px; vertical-align: middle;display:inline-block;margin-right:3px;filter:brightness(0) invert(1);"><a href="#" style="color: #fff;text-decoration: underline;" target="_blank" >By</a> <a href="#" style="color: #fff;text-decoration: underline;" target="_blank" >Pedagotools</a></p></body>
</html>